language: cpp
sudo: required
dist: xenial

addons:
  coverity_scan:
    project:
      name: "PhilInTheGaps/GM-Companion"
      description: "A gamemaster tool."
    notification_email: phil.hoffmann@zoho.eu
    build_command_prepend: qmake
    build_command: make
    branch_pattern: coverity_scan

matrix:
  include:
    - os: linux
      compiler: gcc
      before_install:
        - sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y
        - sudo apt-get update -q
        - sudo apt-get install binutils libpulse-dev qt512base qt512declarative qt512graphicaleffects qt512imageformats qt512multimedia qt512networkauth-no-lgpl qt512quickcontrols qt512quickcontrols2 qt512script qt512tools qt512translations qt512webengine -y
        - source /opt/qt512/bin/qt512-env.sh

      script:
        - qmake
        - make
        
    - os: osx
      before_install:
        - brew update
        - brew install qt5
        - brew link qt5 --force
      script:
        - qmake
        - make

before_script:
  - qmake -version

notifications:
    slack: gm-companion:hYQtgVm2LokcpUT6SbnELwSN
